<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>[INLINE MENU 20251028_212107] CityChainNFT</title>
  <link rel="stylesheet" href="styles.css?v=20251028_212107">
</head>
<body>
  <div id="banner">MENU DEBUG — карта временно отключена (inline JS)</div>

  <div id="app">
    <header class="topbar"><div class="title">Metropolis</div></header>

    <main class="content">
      <!-- Магазин -->
      <section id="tab-shop" class="tab" data-tab-pane="shop">
        <div class="stub">[SHOP] Здесь будет магазин.</div>
      </section>

      <!-- Карта: замена на список кнопок -->
      <section id="tab-map" class="tab active" data-tab-pane="map">
        <div class="menu-wrap">
          <h2 class="menu-title">Регионы</h2>
          <div class="regions-grid" id="regions-grid"></div>
        </div>
      </section>

      <!-- Профиль -->
      <section id="tab-profile" class="tab" data-tab-pane="profile">
        <div class="stub">[PROFILE] Профиль пользователя.</div>
      </section>
    </main>

    <!-- Нижний таббар: ВСТРОЕННЫЕ обработчики -->
    <nav class="bottombar">
      <button class="tabbtn"
        onclick="document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));document.getElementById('tab-shop').classList.add('active');document.getElementById('region-overlay').classList.remove('active');return false;">
        🛒 Магазин
      </button>
      <button class="tabbtn"
        onclick="document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));document.getElementById('tab-map').classList.add('active');document.getElementById('region-overlay').classList.remove('active');return false;">
        🗺️ Карта
      </button>
      <button class="tabbtn"
        onclick="document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));document.getElementById('tab-profile').classList.add('active');document.getElementById('region-overlay').classList.remove('active');return false;">
        👤 Профиль
      </button>
    </nav>
  </div>

  <!-- Оверлей региона -->
  <div id="region-overlay" class="region-overlay">
    <div class="bg" id="region-bg"></div>
    <div class="panel">
      <div class="header">
        <div class="title" id="region-title"></div>
        <div class="controls">
          <button class="btn ghost">Фильтры</button>
          <button class="btn ghost">Сортировка</button>
          <button class="btn" onclick="(function(){document.getElementById('region-overlay').classList.remove('active');document.getElementById('region-bg').style.backgroundImage='';})()">Назад</button>
        </div>
      </div>
      <div class="list">
        <div class="card">Скоро предложения этого региона…</div>
      </div>
    </div>
  </div>

  <!-- ВСТРОЕННЫЙ JS: рисуем 8 кнопок и вешаем клики -->
  <script>
    (function(){
      const TS = '20251028_212107';
      const REGIONS = [
        { id:'kiranomiya',     name:'Kiranomiya'     },
        { id:'noroburg',       name:'Noroburg'       },
        { id:'russet-skyline', name:'Russet Skyline' },
        { id:'san-maris',      name:'San Maris'      },
        { id:'solmara',        name:'Solmara'        },
        { id:'valparyn',       name:'Valparyn'       },
        { id:'nordhaven',      name:'Nordhaven'      },
        { id:'nihon',          name:'Nihon'          }
      ];

      const grid = document.getElementById('regions-grid');
      REGIONS.forEach(r=>{
        const b = document.createElement('button');
        b.className = 'region-btn';
        b.innerHTML = '<div class="region-name">'+r.name+'</div><small>Открыть</small>';
        b.onclick = function(){
          // наглядность
          alert('OPEN REGION: ' + r.name);
          // показать оверлей
          document.getElementById('region-title').textContent = r.name;
          document.getElementById('region-bg').style.backgroundImage = 'url(\"static/regions/'+r.id+'.png?v='+TS+'\")';
          document.getElementById('region-overlay').classList.add('active');
        };
        grid.appendChild(b);
      });
    })();
  </script>
  <!-- Внешний app.js подключать НЕ обязательно, но пусть остаётся; он не мешает. -->
  <script src="app.js?v=20251028_212107"></script>
</body>
</html>
